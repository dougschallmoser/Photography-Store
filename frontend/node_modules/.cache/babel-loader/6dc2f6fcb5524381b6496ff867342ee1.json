{"ast":null,"code":"function tallyCart(items) {\n  const cartCount = items.reduce((tot, item) => tot + item.quantity, 0);\n  const cartCost = items.reduce((total, item) => total + item.price * item.quantity, 0).toFixed(2);\n  return {\n    cartCount,\n    cartCost\n  };\n}\n\nfunction CartReducer(state, action) {\n  switch (action.type) {\n    case 'ADD_ITEM':\n      const item = state.cartItems.find(item => item.id === action.payload.id);\n\n      if (!item) {\n        state.cartItems.push({ ...action.payload,\n          quantity: 1\n        });\n      } else {\n        item.quantity++;\n      }\n\n      return { ...state,\n        ...tallyCart(state.cartItems),\n        cartItems: [...state.cartItems]\n      };\n\n    case 'REMOVE_ITEM':\n      const updatedCart = state.cartItems.filter(item => item.id !== action.payload.id);\n      return { ...state,\n        ...tallyCart(updatedCart),\n        cartItems: [...updatedCart]\n      };\n\n    case 'INCREASE_QTY':\n      state.cartItems.find(item => item.id === action.payload.id).quantity++;\n      return { ...state,\n        ...tallyCart(state.cartItems),\n        cartItems: [...state.cartItems]\n      };\n\n    case 'DECREASE_QTY':\n      state.cartItems.find(item => item.id === action.payload.id).quantity--;\n      return { ...state,\n        ...tallyCart(state.cartItems),\n        cartItems: [...state.cartItems]\n      };\n\n    default:\n      return state;\n  }\n}\n\n_c = CartReducer;\nexport default CartReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartReducer\");","map":{"version":3,"sources":["/Users/dougschallmoser/Development/learning/react/14-shopping-cart/src/contexts/CartReducer.js"],"names":["tallyCart","items","cartCount","reduce","tot","item","quantity","cartCost","total","price","toFixed","CartReducer","state","action","type","cartItems","find","id","payload","push","updatedCart","filter"],"mappings":"AAAA,SAASA,SAAT,CAAmBC,KAAnB,EAA0B;AACxB,QAAMC,SAAS,GAAGD,KAAK,CAACE,MAAN,CAAa,CAACC,GAAD,EAAMC,IAAN,KAAeD,GAAG,GAAGC,IAAI,CAACC,QAAvC,EAAiD,CAAjD,CAAlB;AACA,QAAMC,QAAQ,GAAGN,KAAK,CAACE,MAAN,CAAa,CAACK,KAAD,EAAQH,IAAR,KAAiBG,KAAK,GAAGH,IAAI,CAACI,KAAL,GAAaJ,IAAI,CAACC,QAAxD,EAAkE,CAAlE,EAAqEI,OAArE,CAA6E,CAA7E,CAAjB;AACA,SAAO;AACLR,IAAAA,SADK;AAELK,IAAAA;AAFK,GAAP;AAID;;AAED,SAASI,WAAT,CAAqBC,KAArB,EAA4BC,MAA5B,EAAoC;AAClC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,UAAL;AACE,YAAMT,IAAI,GAAGO,KAAK,CAACG,SAAN,CAAgBC,IAAhB,CAAqBX,IAAI,IAAIA,IAAI,CAACY,EAAL,KAAYJ,MAAM,CAACK,OAAP,CAAeD,EAAxD,CAAb;;AAEA,UAAI,CAACZ,IAAL,EAAW;AACTO,QAAAA,KAAK,CAACG,SAAN,CAAgBI,IAAhB,CAAqB,EAAC,GAAGN,MAAM,CAACK,OAAX;AAAoBZ,UAAAA,QAAQ,EAAE;AAA9B,SAArB;AACD,OAFD,MAEO;AACLD,QAAAA,IAAI,CAACC,QAAL;AACD;;AAED,aAAO,EACL,GAAGM,KADE;AAEL,WAAGZ,SAAS,CAACY,KAAK,CAACG,SAAP,CAFP;AAGLA,QAAAA,SAAS,EAAE,CAAC,GAAGH,KAAK,CAACG,SAAV;AAHN,OAAP;;AAKF,SAAK,aAAL;AACE,YAAMK,WAAW,GAAGR,KAAK,CAACG,SAAN,CAAgBM,MAAhB,CAAuBhB,IAAI,IAAIA,IAAI,CAACY,EAAL,KAAYJ,MAAM,CAACK,OAAP,CAAeD,EAA1D,CAApB;AAEA,aAAO,EACL,GAAGL,KADE;AAEL,WAAGZ,SAAS,CAACoB,WAAD,CAFP;AAGLL,QAAAA,SAAS,EAAE,CAAC,GAAGK,WAAJ;AAHN,OAAP;;AAKF,SAAK,cAAL;AACER,MAAAA,KAAK,CAACG,SAAN,CAAgBC,IAAhB,CAAqBX,IAAI,IAAIA,IAAI,CAACY,EAAL,KAAYJ,MAAM,CAACK,OAAP,CAAeD,EAAxD,EAA4DX,QAA5D;AAEA,aAAO,EACL,GAAGM,KADE;AAEL,WAAGZ,SAAS,CAACY,KAAK,CAACG,SAAP,CAFP;AAGLA,QAAAA,SAAS,EAAE,CAAC,GAAGH,KAAK,CAACG,SAAV;AAHN,OAAP;;AAKF,SAAK,cAAL;AACEH,MAAAA,KAAK,CAACG,SAAN,CAAgBC,IAAhB,CAAqBX,IAAI,IAAIA,IAAI,CAACY,EAAL,KAAYJ,MAAM,CAACK,OAAP,CAAeD,EAAxD,EAA4DX,QAA5D;AAEA,aAAO,EACL,GAAGM,KADE;AAEL,WAAGZ,SAAS,CAACY,KAAK,CAACG,SAAP,CAFP;AAGLA,QAAAA,SAAS,EAAE,CAAC,GAAGH,KAAK,CAACG,SAAV;AAHN,OAAP;;AAKF;AACE,aAAOH,KAAP;AAxCJ;AA0CD;;KA3CQD,W;AA6CT,eAAeA,WAAf","sourcesContent":["function tallyCart(items) {\n  const cartCount = items.reduce((tot, item) => tot + item.quantity, 0)\n  const cartCost = items.reduce((total, item) => total + item.price * item.quantity, 0).toFixed(2)\n  return {\n    cartCount,\n    cartCost\n  }\n}\n\nfunction CartReducer(state, action) {\n  switch (action.type) {\n    case 'ADD_ITEM':\n      const item = state.cartItems.find(item => item.id === action.payload.id)\n\n      if (!item) {\n        state.cartItems.push({...action.payload, quantity: 1})\n      } else {\n        item.quantity++\n      }\n\n      return {\n        ...state,\n        ...tallyCart(state.cartItems),\n        cartItems: [...state.cartItems]\n      }\n    case 'REMOVE_ITEM':\n      const updatedCart = state.cartItems.filter(item => item.id !== action.payload.id)\n\n      return {\n        ...state,\n        ...tallyCart(updatedCart),\n        cartItems: [...updatedCart]\n      }\n    case 'INCREASE_QTY':\n      state.cartItems.find(item => item.id === action.payload.id).quantity++\n\n      return {\n        ...state,\n        ...tallyCart(state.cartItems),\n        cartItems: [...state.cartItems]\n      }\n    case 'DECREASE_QTY':\n      state.cartItems.find(item => item.id === action.payload.id).quantity--\n\n      return {\n        ...state,\n        ...tallyCart(state.cartItems),\n        cartItems: [...state.cartItems]\n      }\n    default: \n      return state\n  }\n}\n\nexport default CartReducer"]},"metadata":{},"sourceType":"module"}